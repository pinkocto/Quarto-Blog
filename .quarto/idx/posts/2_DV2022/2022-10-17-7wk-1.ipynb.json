{"title":"07wk-1 [Pandas] 새로운 열 할당, 아이스크림을 많이 먹으면 걸리는 병(1)","markdown":{"yaml":{"title":"07wk-1 [Pandas] 새로운 열 할당, 아이스크림을 많이 먹으면 걸리는 병(1)","author":"JiyunLim","date":"04/02/2022","categories":["pandas","통계와 시각화","아이스크림을 많이 먹으면 걸리는 병"]},"headingText":"7wk-1","containsRefs":false,"markdown":"\n\n\n> 판다스-- 인덱싱(2), 판다스--새로운열의할당(1), 아이스크림을 많이 먹으면 걸리는 병(1) \n\n# 강의영상 \n\n<https://youtube.com/playlist?list=PLQqh36zP38-yjgL4NsZ1NVQm_xXrrZzBA>\n\n# imports\n\n# 판다스: 인덱싱 3단계-- column의 선택 (with 실전예제)\n\n`-` 지금까지 정리 \n\n||`.`| `[]` | `.iloc` | `.loc`| \n|:-:|:-:|:-:|:-:|:-:|\n|row/단일레이블|X|X|O|O|\n|col/단일레이블|O|O|O|O|\n|row/레이블리스트|X|X|O|O|\n|col/레이블리스트|X|O|O|O|\n|row/슬라이싱|X|O|O|O|\n|col/슬라이싱|X|X|O|O|\n|row/bool,list|X|O|O|O|\n|row/bool,ser|X|O|X|O|\n|row/bool,map|X|X|O|O|\n|col/bool,list|X|?|?|?|\n|col/bool,ser|X|?|?|?|\n|col/bool,map|X|?|?|?|\n\n`-` 채워보세요 (숙제입니다) --> 그냥 제가 채웠어요\n\n||`.`| `[]` | `.iloc` | `.loc`|commnets|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|row/단일레이블|X|X|O|O||\n|col/단일레이블|O|O|O|O||\n|row/레이블리스트|X|X|O|O||\n|col/레이블리스트|X|O|O|O||\n|row/슬라이싱|X|O|O|O||\n|col/슬라이싱|X|X|O|O||\n|row/bool,list|X|O|O|O||\n|row/bool,ser|X|O|X|O||\n|row/bool,map|X|X|O|O||\n|col/bool,list|X|X|O|O||\n|col/bool,ser|X|X|X|X|쓸일이없음|\n|col/bool,map|X|X|O|O||\n\n## [데이터](https://github.com/PacktPublishing/Pandas-Cookbook)\n\n`-` 열의 이름을 출력하여 보자. \n\n## 기본인덱싱 (df 인덱싱공부 1단계 내용)\n\n`-` color ~ num_voted_user 를 뽑고 + aspect_ratio 도 추가적으로 뽑고싶다. -> loc으로는 못하겠어요..\n\n`-` ***(팁)*** 복잡한 조건은 iloc으로 쓰는게 편할때가 있다. $\\to$ 그런데 `df.columns` 변수들이 몇번인지 알아보기 힘듬 $\\to$ 아래와 같이 하면 열의 이름을 인덱스와 함께 출력할 수 있음 \n\n## actor라는 단어가 포함된 column 선택 \n\n`-` 다시 열의 이름들을 확인 \n\n### `-` 방법1\n\n### `-` 방법2\n\n### `-` 방법3\n\n### `-` 방법4\n\n## s로 끝나는 column 선택 \n\n`-` 방법1\n\n`-` 방법2\n\n## c 혹은 d로 시작하는 column 선택\n\n`-` 방법1\n\n`-` 방법2\n\n# 판다스: 새로운 열의 할당 1단계\n\n## 방법1: concat\n\n## 방법2: 4가지 컨셉에 따른 할당 \n\n### `#` 컨셉1: 불가능 \n\n### `#` 컨셉2: 가능\n\n`(예시1)` -- 사실상 이렇게 해야함.\n\n`(예시2)` - 굳이 이렇게까지 할필요는 없음.\n\n`(예시3)`\n\n### `#` 컨셉3: 불가능\n\n(예시1)\n\n### `#` 컨셉4: 가능\n\n(예시1)\n\n(예시2) -- 굳이 쓸 필요가 없다.\n\n(예시3)\n\n## 방법3: `.assign`으로 할당 ($\\star$) -- 제 최애 \n\n> 확장성이 있고 다양한 상황에 사용하기 좋음.\n\n- 오오오오 원래 df가 살아있음.\n\n## 방법4: `.eval`을 이용한 할당 \n\n- 이 방법은 좀 꺼려하는데 아래의 예제를 통해 이유를 알아보자.\n\n## 연습해보기 \n\n### `#` 데이터프레임 생성 \n\n### `#` 새로운열 `r`을 생성하고 $r=\\sqrt{x^2 + y^2}$를 계산\n\n`-` 방법1: 브로드캐스팅\n\n`-` 방법2: lambda + map을 이용한 개별원소 계산\n\n`-` 방법3: eval \n\n# 아이스크림을 많이 먹으면 걸리는 병 (1)\n\n`-` ref- [데이터 과학자의 사고법: 더 나은 선택을 위한 통계학적 통찰의 힘](https://github.com/pinkocto/Quarto-Blog/blob/main/posts/DV/ds.pdf)\n\n- 구매할만한 책입니다\n\n`-` 내용요약 \n\n- 여름 $\\to$ 수영장 $\\to$ 소아마비\n- 여름 $\\to$ 아이스크림 \n- 아이스크림과 소아마비는 상관관계가 높다: 아이스크림 성분중에서 소아마비를 유발하는 유해물질이 있을 것이다 (?) \n\n`-` 아래와 같이 모형을 간단하게 하자. \n\n- 온도 $\\to$ 소아마비 \n- 온도 $\\to$ 아이스크림 \n\n## Toy exam \n\n`-` 교재의 예제상황은 예를들면 아래와 같다. \n\n(숨은진짜상황1)\n\n$$\\text{아이스크림 판매량} = 20 + 2 \\times \\text{온도} + \\epsilon$$\n\n- 온도와 아이스크림 판매량의 산점도 \n\n(숨은진짜상황2)\n\n$$\\text{소아마비 반응수치} = 30 + 0.5 \\times \\text{온도} + \\epsilon$$\n- 좌변은 소아마비임을 나타내는 어떠한 반응수치라고 생각하자. \n\n- 온도와 소아마비의 산점도 \n\n**(우리가 데이터로부터 관측한 상황)**\n\n`-` 아이스크림과 질병의 산점도를 그려보자. \n\n- 양의 상관관계에 있다. \n\n`-` 아이스크림 중 어떠한 물질이 소아마비를 일으키는것이 분명하므로 (인과성이 분명해보이니까) 아래와 같은 모형을 세우자. <-- 여기서부터 틀렸음 \n\n$${\\tt disease}_i =\\beta_0 +\\beta_1 {\\tt icecream}_i +\\epsilon_i,\\quad \\textbf{for} ~~ i=1,2,\\dots, 12$$\n\n`-` 적절한 $\\beta_0$와 $\\beta_1$을 추정하면 우리는 아이스크림과 소아마비의 관계를 알 수 있다. <-- 틀린주장 \n\n- 틀린 모형 \n- 도데체 우리가 뭘 잘못했는가? \n\n`-` 두 변수 사이에 상관관계가 있어도 실제 원인은 다른 변수에 숨겨져 있는 경우가 많다. \n\n(ex1) \n\n- 온도 $\\to$ 익사\n- 온도 $\\to$ 아이스크림 \n- 아이스크림과 익사자도 양의 상관관계에 있을것이다. \n- 아이스크림을 먹이면 물에 빠져 죽는다 $\\to$ 틀린주장 \n- 사실 기온이 숨겨진 원인이다. 기온이 증가하면 아이스크림 판매량도 증가하고 폭염때문에 익사사고율도 높아지는 구조이다. \n\n(ex2) \n\n- 인구수 $\\to$ 교회 \n- 인구수 $\\to$ 범죄건수 \n- 지역별 교회와 범죄건수를 살펴보면 상관관계가 높게 나올것임 \n- 교회를 지으면 범죄건수도 증가한다? $\\to$ 틀린주장 \n- 사실 인구가 숨겨진 요인임 \n\n`-` ex2, ex1에 대하여 바른 분석을 하려면? \n\n- ex2: 인구가 비슷한 도시끼리 묶어서 비교해보면 교회와 범죄의 건수는 양의 상관관계에 있지 않을것임 \n- ex1: 온도가 비슷한 그룹끼리 묶어보자. \n\n`-` 올바른 분석: 온도가 비슷한 그룹끼리 묶어서 그려보자. $\\to$ 상관계수가 줄어들 것이다. \n\n- 진짜로 선형관계가 약해졌다.. \n\n# 숙제 (수업시간에 한 내용 X)\n\n아래의 결과를 관찰하고 drop의 기능을 유추하라. \n\n(예시1)\n\n- `a` 컬럼 삭제\n\n(예시2)\n\n- `a`, `b` 컬럼 삭제\n\n(예시3)\n\n- 첫번째 행 삭제\n\n(예시4)\n\n행 인덱스 2,3 (3번째, 4번째 행)에 해당하는 행 삭제\n\n문제: `df` 에서 a,c열을 삭제하고 첫행을 삭제하라. \n","srcMarkdownNoYaml":"\n\n# 7wk-1\n\n> 판다스-- 인덱싱(2), 판다스--새로운열의할당(1), 아이스크림을 많이 먹으면 걸리는 병(1) \n\n# 강의영상 \n\n<https://youtube.com/playlist?list=PLQqh36zP38-yjgL4NsZ1NVQm_xXrrZzBA>\n\n# imports\n\n# 판다스: 인덱싱 3단계-- column의 선택 (with 실전예제)\n\n`-` 지금까지 정리 \n\n||`.`| `[]` | `.iloc` | `.loc`| \n|:-:|:-:|:-:|:-:|:-:|\n|row/단일레이블|X|X|O|O|\n|col/단일레이블|O|O|O|O|\n|row/레이블리스트|X|X|O|O|\n|col/레이블리스트|X|O|O|O|\n|row/슬라이싱|X|O|O|O|\n|col/슬라이싱|X|X|O|O|\n|row/bool,list|X|O|O|O|\n|row/bool,ser|X|O|X|O|\n|row/bool,map|X|X|O|O|\n|col/bool,list|X|?|?|?|\n|col/bool,ser|X|?|?|?|\n|col/bool,map|X|?|?|?|\n\n`-` 채워보세요 (숙제입니다) --> 그냥 제가 채웠어요\n\n||`.`| `[]` | `.iloc` | `.loc`|commnets|\n|:-:|:-:|:-:|:-:|:-:|:-:|\n|row/단일레이블|X|X|O|O||\n|col/단일레이블|O|O|O|O||\n|row/레이블리스트|X|X|O|O||\n|col/레이블리스트|X|O|O|O||\n|row/슬라이싱|X|O|O|O||\n|col/슬라이싱|X|X|O|O||\n|row/bool,list|X|O|O|O||\n|row/bool,ser|X|O|X|O||\n|row/bool,map|X|X|O|O||\n|col/bool,list|X|X|O|O||\n|col/bool,ser|X|X|X|X|쓸일이없음|\n|col/bool,map|X|X|O|O||\n\n## [데이터](https://github.com/PacktPublishing/Pandas-Cookbook)\n\n`-` 열의 이름을 출력하여 보자. \n\n## 기본인덱싱 (df 인덱싱공부 1단계 내용)\n\n`-` color ~ num_voted_user 를 뽑고 + aspect_ratio 도 추가적으로 뽑고싶다. -> loc으로는 못하겠어요..\n\n`-` ***(팁)*** 복잡한 조건은 iloc으로 쓰는게 편할때가 있다. $\\to$ 그런데 `df.columns` 변수들이 몇번인지 알아보기 힘듬 $\\to$ 아래와 같이 하면 열의 이름을 인덱스와 함께 출력할 수 있음 \n\n## actor라는 단어가 포함된 column 선택 \n\n`-` 다시 열의 이름들을 확인 \n\n### `-` 방법1\n\n### `-` 방법2\n\n### `-` 방법3\n\n### `-` 방법4\n\n## s로 끝나는 column 선택 \n\n`-` 방법1\n\n`-` 방법2\n\n## c 혹은 d로 시작하는 column 선택\n\n`-` 방법1\n\n`-` 방법2\n\n# 판다스: 새로운 열의 할당 1단계\n\n## 방법1: concat\n\n## 방법2: 4가지 컨셉에 따른 할당 \n\n### `#` 컨셉1: 불가능 \n\n### `#` 컨셉2: 가능\n\n`(예시1)` -- 사실상 이렇게 해야함.\n\n`(예시2)` - 굳이 이렇게까지 할필요는 없음.\n\n`(예시3)`\n\n### `#` 컨셉3: 불가능\n\n(예시1)\n\n### `#` 컨셉4: 가능\n\n(예시1)\n\n(예시2) -- 굳이 쓸 필요가 없다.\n\n(예시3)\n\n## 방법3: `.assign`으로 할당 ($\\star$) -- 제 최애 \n\n> 확장성이 있고 다양한 상황에 사용하기 좋음.\n\n- 오오오오 원래 df가 살아있음.\n\n## 방법4: `.eval`을 이용한 할당 \n\n- 이 방법은 좀 꺼려하는데 아래의 예제를 통해 이유를 알아보자.\n\n## 연습해보기 \n\n### `#` 데이터프레임 생성 \n\n### `#` 새로운열 `r`을 생성하고 $r=\\sqrt{x^2 + y^2}$를 계산\n\n`-` 방법1: 브로드캐스팅\n\n`-` 방법2: lambda + map을 이용한 개별원소 계산\n\n`-` 방법3: eval \n\n# 아이스크림을 많이 먹으면 걸리는 병 (1)\n\n`-` ref- [데이터 과학자의 사고법: 더 나은 선택을 위한 통계학적 통찰의 힘](https://github.com/pinkocto/Quarto-Blog/blob/main/posts/DV/ds.pdf)\n\n- 구매할만한 책입니다\n\n`-` 내용요약 \n\n- 여름 $\\to$ 수영장 $\\to$ 소아마비\n- 여름 $\\to$ 아이스크림 \n- 아이스크림과 소아마비는 상관관계가 높다: 아이스크림 성분중에서 소아마비를 유발하는 유해물질이 있을 것이다 (?) \n\n`-` 아래와 같이 모형을 간단하게 하자. \n\n- 온도 $\\to$ 소아마비 \n- 온도 $\\to$ 아이스크림 \n\n## Toy exam \n\n`-` 교재의 예제상황은 예를들면 아래와 같다. \n\n(숨은진짜상황1)\n\n$$\\text{아이스크림 판매량} = 20 + 2 \\times \\text{온도} + \\epsilon$$\n\n- 온도와 아이스크림 판매량의 산점도 \n\n(숨은진짜상황2)\n\n$$\\text{소아마비 반응수치} = 30 + 0.5 \\times \\text{온도} + \\epsilon$$\n- 좌변은 소아마비임을 나타내는 어떠한 반응수치라고 생각하자. \n\n- 온도와 소아마비의 산점도 \n\n**(우리가 데이터로부터 관측한 상황)**\n\n`-` 아이스크림과 질병의 산점도를 그려보자. \n\n- 양의 상관관계에 있다. \n\n`-` 아이스크림 중 어떠한 물질이 소아마비를 일으키는것이 분명하므로 (인과성이 분명해보이니까) 아래와 같은 모형을 세우자. <-- 여기서부터 틀렸음 \n\n$${\\tt disease}_i =\\beta_0 +\\beta_1 {\\tt icecream}_i +\\epsilon_i,\\quad \\textbf{for} ~~ i=1,2,\\dots, 12$$\n\n`-` 적절한 $\\beta_0$와 $\\beta_1$을 추정하면 우리는 아이스크림과 소아마비의 관계를 알 수 있다. <-- 틀린주장 \n\n- 틀린 모형 \n- 도데체 우리가 뭘 잘못했는가? \n\n`-` 두 변수 사이에 상관관계가 있어도 실제 원인은 다른 변수에 숨겨져 있는 경우가 많다. \n\n(ex1) \n\n- 온도 $\\to$ 익사\n- 온도 $\\to$ 아이스크림 \n- 아이스크림과 익사자도 양의 상관관계에 있을것이다. \n- 아이스크림을 먹이면 물에 빠져 죽는다 $\\to$ 틀린주장 \n- 사실 기온이 숨겨진 원인이다. 기온이 증가하면 아이스크림 판매량도 증가하고 폭염때문에 익사사고율도 높아지는 구조이다. \n\n(ex2) \n\n- 인구수 $\\to$ 교회 \n- 인구수 $\\to$ 범죄건수 \n- 지역별 교회와 범죄건수를 살펴보면 상관관계가 높게 나올것임 \n- 교회를 지으면 범죄건수도 증가한다? $\\to$ 틀린주장 \n- 사실 인구가 숨겨진 요인임 \n\n`-` ex2, ex1에 대하여 바른 분석을 하려면? \n\n- ex2: 인구가 비슷한 도시끼리 묶어서 비교해보면 교회와 범죄의 건수는 양의 상관관계에 있지 않을것임 \n- ex1: 온도가 비슷한 그룹끼리 묶어보자. \n\n`-` 올바른 분석: 온도가 비슷한 그룹끼리 묶어서 그려보자. $\\to$ 상관계수가 줄어들 것이다. \n\n- 진짜로 선형관계가 약해졌다.. \n\n# 숙제 (수업시간에 한 내용 X)\n\n아래의 결과를 관찰하고 drop의 기능을 유추하라. \n\n(예시1)\n\n- `a` 컬럼 삭제\n\n(예시2)\n\n- `a`, `b` 컬럼 삭제\n\n(예시3)\n\n- 첫번째 행 삭제\n\n(예시4)\n\n행 인덱스 2,3 (3번째, 4번째 행)에 해당하는 행 삭제\n\n문제: `df` 에서 a,c열을 삭제하고 첫행을 삭제하라. \n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":false,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":false,"code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"2022-10-17-7wk-1.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.4.315","theme":"cosmo","code-copy":true,"title-block-banner":true,"title":"07wk-1 [Pandas] 새로운 열 할당, 아이스크림을 많이 먹으면 걸리는 병(1)","author":"JiyunLim","date":"04/02/2022","categories":["pandas","통계와 시각화","아이스크림을 많이 먹으면 걸리는 병"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}